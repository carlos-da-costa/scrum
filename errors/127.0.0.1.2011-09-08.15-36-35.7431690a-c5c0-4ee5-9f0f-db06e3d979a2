(dp1
S'output'
p2
S''
sS'layer'
p3
S'/home/www-data/web2py/applications/scrum/models/db1.py'
p4
sS'code'
p5
S"#coding: utf8\nBRAZILIAN_DATE = IS_DATE(format=T('%Y-%m-%d'), error_message=T('deve ser dd/mm/yyyy!'))\nconfig = db(db.config).select().first()\n\ndb.define_table('biv',\n                Field('numero','integer'),\n                Field('data','date',requires= BRAZILIAN_DATE),\n                Field('versao'))\ndb.biv.id.represent = lambda id: A('Editar BIV %i' % db.biv[id].numero,_href=URL(r=request,f='edita_biv',args=[id]))                                                       \n\ndb.define_table('menu',\n                Field('caminho'))\n               \ndb.define_table('menu_dom',\n                Field('codigo'),\n                Field('descricao'),\n                Field('nome'),\n                Field('modulo'))\n           \ndb.define_table('modulo',\n                Field('codigo','integer'),\n                Field('nome'))\n               \ndb.define_table('sprint',\n                Field('numero'),\n                Field('inicio','date',requires=BRAZILIAN_DATE),\n                Field('fim','date',requires=BRAZILIAN_DATE))\ndb.sprint.id.represent = lambda id: A('Editar %i' % id, _href=URL(r=request,c='sprint',f='editar',args=[id]))\n\ndb.define_table('ticket',\n                Field('chamado'),\n                Field('consultor',db.auth_user),\n                Field('analista',db.auth_user),\n                Field('estado'),\n                Field('patch','boolean'),\n                Field('local_teste'))\ndb.ticket.consultor.requires = IS_IN_DB(db((db.auth_user.id == db.auth_membership) & \n                                           (db.auth_membership.group_id==config.grupo_consultor)),\n                                        'auth_user.id','%(name)' )\n               \ndb.define_table('caso_teste',\n                Field('ticket',db.ticket),\n                Field('acao','text'),\n                Field('resultado','text'),\n                Field('anexo','upload'), \n                Field('ordem','integer'))\n\ndb.define_table('item_biv',\n                Field('biv',db.biv),\n                Field('ticket',db.ticket), \n                Field('menu','text',widget=SQLFORM.widgets.autocomplete(request,db.menu.caminho,limitby=(0,10), min_length=2)),\n                Field('modulo',widget=SQLFORM.widgets.autocomplete(request,db.modulo.nome,limitby=(0,10), min_length=2)),\n                Field('texto','text'))\n\ndb.define_table('teste',\n                Field('ticket',db.ticket),\n                Field('caso',db.caso_teste),\n                Field('data','date'), \n                Field('resultado','text'),\n                Field('conclusao'))      \n\ndb.define_table('config',\n                Field('grupo_desenvolvedor',db.auth_group),\n                Field('grupo_consultor',db.auth_group),\n                Field('grupo_administrador',db.auth_group))                           \n               \nconfig = db(db.config).select().first()\n\ndb.item_biv.id.represent = lambda id: SPAN(A('Editar',_href=URL(r=request,c='default',f='edita_biv',args=[db.item_biv[id].biv,id])))                \n               \ndef insere_menu(form):       \n    if len(form.vars.menu) > 0:\n       db.menu.insert(caminho=form.vars.menu) \n\ndef insere_modulo(form):\n    if len(form.vars.modulo) > 0:\n       db.modulo.insert(nome=form.vars.modulo)        \n      \ncrud.settings.create_onaccept.item_biv.append(lambda form: insere_menu(form))\ncrud.settings.create_onaccept.item_biv.append(lambda form: insere_modulo(form))\n"
p6
sS'snapshot'
p7
(dp8
sS'traceback'
p9
S'Traceback (most recent call last):\n  File "/home/www-data/web2py/gluon/restricted.py", line 192, in restricted\n    exec ccode in environment\n  File "/home/www-data/web2py/applications/scrum/models/db1.py", line 3, in <module>\n    config = db(db.config).select().first()\n  File "/home/www-data/web2py/gluon/dal.py", line 4331, in __getattr__\n    return self[key]\n  File "/home/www-data/web2py/gluon/dal.py", line 4325, in __getitem__\n    return dict.__getitem__(self, str(key))\nKeyError: \'config\'\n'
p10
s.